(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(52).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(117),i=n(118);t.decode=r,t.encode=i},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(88),s=n(129),a=n(130),c=n(54),u=n(55),l=n(89),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(Error);function f(e,t,n,r){if(!(e instanceof t))throw new h("a '"+t.name+"' was expected, but '"+e.constructor.name+"' was provided in "+n.constructor.name+"#"+r)}function p(e,t,n,r,i){var a=s[e];return void 0===n?t.push(o.NIL):function(e,t,n,r){var i,o=!1;switch(t){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":i="number";break;case"string":i="string",o=!0;break;case"boolean":return}if(typeof e!==i&&(!o||o&&null!==e)){var s="'"+JSON.stringify(e)+"'"+(e&&e.constructor&&" ("+e.constructor.name+")");throw new h("a '"+i+"' was expected, but "+s+" was provided in "+n.constructor.name+"#"+r)}}(n,e,r,i),!!a&&(a(t,n),!0)}function d(e,t,n){var r=a[e];return r?r(t,n):null}var v=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Object.defineProperties(this,{$changes:{value:new l.ChangeTree,enumerable:!1,writable:!0}});var n=this._descriptors;n&&Object.defineProperties(this,n)}return Object.defineProperty(e.prototype,"_schema",{get:function(){return this.constructor._schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_descriptors",{get:function(){return this.constructor._descriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_indexes",{get:function(){return this.constructor._indexes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_filters",{get:function(){return this.constructor._filters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$changed",{get:function(){return this.$changes.changed},enumerable:!0,configurable:!0}),e.prototype.decode=function(t,n){void 0===n&&(n={offset:0});var r=[],i=this._schema,s=this._indexes,l={};Object.keys(s).forEach(function(e){var t=s[e];l[t]=e});var h=t.length;t[n.offset]===o.TYPE_ID&&(n.offset+=2);for(var f=function(){var s=t[n.offset++];if(s===o.END_OF_STRUCTURE)return"break";var h=l[s],f=i[h],v=void 0,y=void 0,g=!1;if(f._schema)a.nilCheck(t,n)?(n.offset++,v=null):(v=p["_"+h]||p.createTypeInstance(t,n,f)).decode(t,n),g=!0;else if(Array.isArray(f)){f=f[0],y=[];var _=p["_"+h]||new c.ArraySchema;v=_.clone();var m=a.number(t,n),b=Math.min(a.number(t,n),m);g=b>0;var w=!1;v.length>m&&v.splice(m).forEach(function(e,t){e&&e.onRemove&&e.onRemove(),_.onRemove&&_.onRemove(e,m+t)});for(var C=0;C<b;C++){var O=a.number(t,n),S=void 0;a.indexChangeCheck(t,n)&&(a.uint8(t,n),S=a.number(t,n),w=!0);var A=!w&&!v[O]||w&&void 0===S;if(f.prototype instanceof e){var E=void 0;if((E=A?p.createTypeInstance(t,n,f):void 0!==S?_[S]:_[O])||(E=p.createTypeInstance(t,n,f),A=!0),a.nilCheck(t,n)){n.offset++,_.onRemove&&_.onRemove(E,O);continue}E.decode(t,n),v[O]=E}else v[O]=d(f,t,n);A?_.onAdd&&_.onAdd(v[O],O):_.onChange&&_.onChange(v[O],O),y.push(v[O])}}else if(f.map){f=f.map;var I=p["_"+h]||new u.MapSchema;v=I.clone();var P=a.number(t,n);g=P>0;w=!1;var R=Object.keys(I);for(C=0;C<P&&(void 0!==t[n.offset]&&t[n.offset]!==o.END_OF_STRUCTURE);C++){var k=void 0;a.indexChangeCheck(t,n)&&(a.uint8(t,n),k=R[a.number(t,n)],w=!0);var x=a.numberCheck(t,n),j="string"!=typeof f,M=x?R[a.number(t,n)]:a.string(t,n);E=void 0;E=(A=!w&&!I[M]||w&&void 0===k&&x)&&j?p.createTypeInstance(t,n,f):void 0!==k?I[k]:I[M],a.nilCheck(t,n)?(n.offset++,E&&E.onRemove&&E.onRemove(),I.onRemove&&I.onRemove(E,M),delete v[M]):(j?(E.decode(t,n),v[M]=E):v[M]=d(f,t,n),A?I.onAdd&&I.onAdd(E,M):I.onChange&&I.onChange(E,M))}}else v=d(f,t,n),g=!0;g&&p.onChange&&r.push({field:h,value:y||v,previousValue:p["_"+h]}),p["_"+h]=v},p=this;n.offset<h;){if("break"===f())break}return this.onChange&&r.length>0&&this.onChange(r),this},e.prototype.encode=function(e,t,n){var r=this;void 0===e&&(e=this),void 0===t&&(t=!1);var i=[],a=function(){r!==e&&i.push(o.END_OF_STRUCTURE)};if(!this.$changes.changed&&!t)return a(),i;for(var l=this._schema,h=this._indexes,d=this._filters,v=t||n?this.$changes.allChanges:this.$changes.changes,y=function(a,y){var _=v[a],m=l[_],b=d&&d[_],w=g["_"+_],C=h[_];if(void 0===w)return"continue";var O=[];if(m._schema){if(n&&b&&!b.call(g,n,w,e))return"continue";s.number(O,C),w?(f(w,m,g,_),g.tryEncodeTypeId(O,m,w.constructor),O=O.concat(w.encode(e,t,n))):s.uint8(O,o.NIL)}else if(Array.isArray(m)){s.number(O,C),s.number(O,w.length);var S=(t||n?w.$changes.allChanges:w.$changes.changes).filter(function(e){return void 0!==r["_"+_][e]}),A=S.length;s.number(O,A);var E="string"!=typeof m[0];f(g["_"+_],c.ArraySchema,g,_);for(var I=0;I<A;I++){var P=S[I];if(void 0!==(M=g["_"+_][P]))if(!n||!b||b.call(g,n,M,e))if(E)s.number(O,P),void 0!==(L=w.$changes.getIndexChange(M))&&(s.uint8(O,o.INDEX_CHANGE),s.number(O,L)),f(M,m[0],g,_),g.tryEncodeTypeId(O,m[0],M.constructor),O=O.concat(M.encode(e,t,n));else if(s.number(O,P),!p(m[0],O,M,g,_)){console.log("cannot encode",l[_]);continue}}t||w.$changes.discard()}else if(m.map){s.number(O,C);var R=t||n?w.$changes.allChanges:w.$changes.changes;s.number(O,R.length);var k=Object.keys(g["_"+_]);E="string"!=typeof m.map;f(g["_"+_],u.MapSchema,g,_);for(var x=0;x<R.length;x++){var j="number"==typeof R[x]&&k[R[x]]||R[x],M=g["_"+_][j],T=g["_"+_]._indexes.get(j);if(!n||!b||b.call(g,n,M,e)){if(t){if(void 0===M)continue;T=void 0}var L=w.$changes.getIndexChange(M);M&&void 0!==L&&(s.uint8(O,o.INDEX_CHANGE),s.number(O,g["_"+_]._indexes.get(L))),void 0!==T?s.number(O,T):s.string(O,j),M&&E?(f(M,m.map,g,_),g.tryEncodeTypeId(O,m.map,M.constructor),O=O.concat(M.encode(e,t,n))):void 0!==M?p(m.map,O,M,g,_):s.uint8(O,o.NIL)}}t||(w.$changes.discard(),n||g["_"+_]._updateIndexes())}else{if(n&&b&&!b.call(g,n,w,e))return"continue";if(s.number(O,C),!p(m,O,w,g,_))return console.log("cannot encode",l[_]),"continue"}i=i.concat(O)},g=this,_=0,m=v.length;_<m;_++)y(_);return a(),t||n||this.$changes.discard(),i},e.prototype.encodeFiltered=function(e){return this.encode(this,!1,e)},e.prototype.encodeAll=function(){return this.encode(this,!0)},e.prototype.encodeAllFiltered=function(e){return this.encode(this,!0,e)},e.prototype.clone=function(){var e=new this.constructor,t=this._schema;for(var n in t)e[n]=this[n];return e},e.prototype.triggerAll=function(){if(this.onChange){var e=[],t=this._schema;for(var n in t)void 0!==this[n]&&e.push({field:n,value:this[n],previousValue:void 0});this.onChange(e)}},e.prototype.toJSON=function(){var e=this._schema,t={};for(var n in e)t[n]=this["_"+n];return t},e.prototype.tryEncodeTypeId=function(e,t,n){t._typeid!==n._typeid&&(s.uint8(e,o.TYPE_ID),s.uint8(e,n._typeid))},e.prototype.createTypeInstance=function(e,t,n){return e[t.offset]===o.TYPE_ID?(t.offset++,new(this.constructor._context.get(a.uint8(e,t)))):new n},e}();t.Schema=v},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,Object.create(t.prototype)),Object.defineProperties(i,{$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},triggerAll:{value:function(){if(i.onAdd)for(var e=0;e<i.length;e++)i.onAdd(i[e],e)}},clone:{value:function(){var e=new(t.bind.apply(t,[void 0].concat(i)));return e.onAdd=i.onAdd,e.onRemove=i.onRemove,e.onChange=i.onChange,e}}}),i}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return Array},enumerable:!0,configurable:!0}),t}(Array);t.ArraySchema=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function e(t){void 0===t&&(t={});var n=this;for(var r in t)this[r]=t[r];Object.defineProperties(this,{$changes:{value:void 0,enumerable:!1,writable:!0},onAdd:{value:void 0,enumerable:!1,writable:!0},onRemove:{value:void 0,enumerable:!1,writable:!0},onChange:{value:void 0,enumerable:!1,writable:!0},clone:{value:function(){var t=Object.assign(new e,n);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.onChange=n.onChange,t}},triggerAll:{value:function(){if(n.onAdd)for(var e in n)n.onAdd(n[e],e)}},_indexes:{value:new Map,enumerable:!1,writable:!0},_updateIndexes:{value:function(){var e=0,t=new Map;for(var r in n)t.set(r,e++);n._indexes=t}}})}}();t.MapSchema=r},,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.USER_ID=1]="USER_ID",e[e.JOIN_REQUEST=9]="JOIN_REQUEST",e[e.JOIN_ROOM=10]="JOIN_ROOM",e[e.JOIN_ERROR=11]="JOIN_ERROR",e[e.LEAVE_ROOM=12]="LEAVE_ROOM",e[e.ROOM_DATA=13]="ROOM_DATA",e[e.ROOM_STATE=14]="ROOM_STATE",e[e.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",e[e.ROOM_LIST=20]="ROOM_LIST",e[e.BAD_REQUEST=50]="BAD_REQUEST"}(t.Protocol||(t.Protocol={})),t.utf8Read=function(e,t){for(var n=e.getUint8(t++),r="",i=0,o=t,s=t+n;o<s;o++){var a=e.getUint8(o);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(i=(7&a)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0);else r+=String.fromCharCode((31&a)<<6|63&e.getUint8(++o));else r+=String.fromCharCode(a)}return r},t.utf8Length=function(e){void 0===e&&(e="");for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n+1}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(115);var r=n(116);t.Client=r.Client;var i=n(74);t.Protocol=i.Protocol;var o=n(84);t.Room=o.Room;var s=n(86);t.FossilDeltaSerializer=s.FossilDeltaSerializer;var a=n(128);t.SchemaSerializer=a.SchemaSerializer;var c=n(85);t.registerSerializer=c.registerSerializer;var u=n(87);t.Schema=u.Schema,t.type=u.type,c.registerSerializer("fossil-delta",s.FossilDeltaSerializer),c.registerSerializer("schema",a.SchemaSerializer);var l=n(91);t.initializeSync=l.initializeSync,t.sync=l.sync,t.syncMap=l.syncMap,t.syncObject=l.syncObject,t.syncVar=l.syncVar,t.syncList=l.syncList,t.key=l.key,t.room=l.room,t.listen=l.listen},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80);t.OnceSignal=r.OnceSignal;var i=n(119);t.Signal=i.Signal;var o=n(82);t.Slot=o.Slot;var s=n(81);t.SlotList=s.SlotList},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(81),i=n(82),o=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.slots=r.SlotList.NIL,this.valueClasses=1===e.length&&e[0]instanceof Array?e[0]:e}return Object.defineProperty(e.prototype,"valueClasses",{get:function(){return this._valueClasses},set:function(e){this._valueClasses=e?e.slice():[];for(var t=this._valueClasses.length;t--;)if(!(this._valueClasses[t]instanceof Object))throw new Error("Invalid valueClasses argument: item at index "+t+" should be a Class but was:<"+this._valueClasses[t]+">."+this._valueClasses[t])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numListeners",{get:function(){return this.slots.length},enumerable:!0,configurable:!0}),e.prototype.addOnce=function(e){return this.registerListener(e,!0)},e.prototype.once=function(e){return this.addOnce(e)},e.prototype.remove=function(e){var t=this.slots.find(e);return t?(this.slots=this.slots.filterNot(e),t):null},e.prototype.removeAll=function(){this.slots=r.SlotList.NIL},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._valueClasses.length,r=e.length;if(r<n)throw new Error("Incorrect number of arguments. Expected at least "+n+" but received "+r+".");for(var i=0;i<n;i++)if(!(null===e[i]||e[i]instanceof this._valueClasses[i]||e[i].constructor===this._valueClasses[i]))throw new Error("Value object <"+e[i]+"> is not an instance of <"+this._valueClasses[i]+">.");var o=this.slots;if(o.nonEmpty)for(;o.nonEmpty;)o.head.execute(e),o=o.tail},e.prototype.registerListener=function(e,t){if(void 0===t&&(t=!1),this.registrationPossible(e,t)){var n=new i.Slot(e,this,t);return this.slots=this.slots.prepend(n),n}return this.slots.find(e)},e.prototype.registrationPossible=function(e,t){if(!this.slots.nonEmpty)return!0;var n=this.slots.find(e);if(!n)return!0;if(n.once!==t)throw new Error("You cannot addOnce() then add() the same listener without removing the relationship first.");return!1},e}();t.OnceSignal=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(t,n){if(void 0===n&&(n=null),this.nonEmpty=!1,t||n){if(!t)throw new Error("Parameter head cannot be null.");this.head=t,this.tail=n||e.NIL,this.nonEmpty=!0}else{if(e.NIL)throw new Error("Parameters head and tail are null. Use the NIL element instead.");this.nonEmpty=!1}}return Object.defineProperty(e.prototype,"length",{get:function(){if(!this.nonEmpty)return 0;if(this.tail===e.NIL)return 1;for(var t=0,n=this;n.nonEmpty;)++t,n=n.tail;return t},enumerable:!0,configurable:!0}),e.prototype.prepend=function(t){return new e(t,this)},e.prototype.append=function(t){if(!t)return this;if(!this.nonEmpty)return new e(t);if(this.tail===e.NIL)return new e(t).prepend(this.head);for(var n=new e(this.head),r=n,i=this.tail;i.nonEmpty;)r=r.tail=new e(i.head),i=i.tail;return r.tail=new e(t),n},e.prototype.insertWithPriority=function(t){if(!this.nonEmpty)return new e(t);var n=t.priority;if(n>this.head.priority)return this.prepend(t);for(var r=new e(this.head),i=r,o=this.tail;o.nonEmpty;){if(n>o.head.priority)return i.tail=o.prepend(t),r;i=i.tail=new e(o.head),o=o.tail}return i.tail=new e(t),r},e.prototype.filterNot=function(t){if(!this.nonEmpty||null==t)return this;if(t===this.head.listener)return this.tail;for(var n=new e(this.head),r=n,i=this.tail;i.nonEmpty;){if(i.head.listener===t)return r.tail=i.tail,n;r=r.tail=new e(i.head),i=i.tail}return this},e.prototype.contains=function(e){if(!this.nonEmpty)return!1;for(var t=this;t.nonEmpty;){if(t.head.listener===e)return!0;t=t.tail}return!1},e.prototype.find=function(e){if(!this.nonEmpty)return null;for(var t=this;t.nonEmpty;){if(t.head.listener===e)return t.head;t=t.tail}return null},e.prototype.toString=function(){for(var e="",t=this;t.nonEmpty;)e+=t.head+" -> ",t=t.tail;return"[List "+(e+="NIL")+"]"},e.NIL=new e(null,null),e}();t.SlotList=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),this._enabled=!0,this._once=!1,this._priority=0,this._listener=e,this._once=n,this._signal=t,this._priority=r,this.verifyListener(e)}return e.prototype.execute0=function(){this._enabled&&(this._once&&this.remove(),this._params&&this._params.length?this._listener.apply(null,this._params):this._listener())},e.prototype.execute1=function(e){this._enabled&&(this._once&&this.remove(),this._params&&this._params.length?this._listener.apply(null,[e].concat(this._params)):this._listener(e))},e.prototype.execute=function(e){if(this._enabled){this._once&&this.remove(),this._params&&this._params.length&&(e=e.concat(this._params));var t=e.length;0===t?this._listener():1===t?this._listener(e[0]):2===t?this._listener(e[0],e[1]):3===t?this._listener(e[0],e[1],e[2]):this._listener.apply(null,e)}},Object.defineProperty(e.prototype,"listener",{get:function(){return this._listener},set:function(e){if(null==e)throw new Error("Given listener is null.\nDid you want to set enabled to false instead?");this.verifyListener(e),this._listener=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"once",{get:function(){return this._once},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"[Slot listener: "+this._listener+", once: "+this._once+", priority: "+this._priority+", enabled: "+this._enabled+"]"},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),e.prototype.remove=function(){this._signal.remove(this._listener)},e.prototype.verifyListener=function(e){if(null==e)throw new Error("Given listener is null.");if(null==this._signal)throw new Error("Internal signal reference has not been set yet.")},e}();t.Slot=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(120),s=n(52),a=function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t,void 0,{connect:n})||this;return r._enqueuedCalls=[],r}return i(t,e),t.prototype.onOpenCallback=function(t){if(e.prototype.onOpenCallback.call(this),this.binaryType="arraybuffer",this._enqueuedCalls.length>0){for(var n=0,r=this._enqueuedCalls;n<r.length;n++){var i=r[n],o=i[0],s=i[1];this[o].apply(this,s)}this._enqueuedCalls=[]}},t.prototype.send=function(t){if(this.ws.readyState===o.default.OPEN)return e.prototype.send.call(this,s.encode(t));this._enqueuedCalls.push(["send",[t]])},t}(o.default);t.Connection=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(79),i=n(52),o=n(83),s=n(85),a=n(74),c=n(86),u=function(){function e(e,t){var n=this;this.onJoin=new r.Signal,this.onStateChange=new r.Signal,this.onMessage=new r.Signal,this.onError=new r.Signal,this.onLeave=new r.Signal,this.id=null,this.name=e,this.options=t,this.serializer=new c.FossilDeltaSerializer,this.onLeave.add(function(){return n.removeAllListeners()})}return e.prototype.connect=function(e){var t=this;this.connection=new o.Connection(e,!1),this.connection.reconnectEnabled=!1,this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(e){return t.onLeave.dispatch(e)},this.connection.onerror=function(e){console.warn("Possible causes: room's onAuth() failed or maxClients has been reached."),t.onError.dispatch(e)},this.connection.open()},e.prototype.leave=function(e){void 0===e&&(e=!0),this.connection?e?this.connection.send([a.Protocol.LEAVE_ROOM]):this.connection.close():this.onLeave.dispatch()},e.prototype.send=function(e){this.connection.send([a.Protocol.ROOM_DATA,this.id,e])},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasJoined",{get:function(){return void 0!==this.sessionId},enumerable:!0,configurable:!0}),e.prototype.listen=function(e,t,n){if("schema"!==this.serializerId)return this.serializerId||console.warn("room.Listen() should be called after room.onJoin has been called (DEPRECATION WARNING)"),this.serializer.api.listen(e,t,n);console.error("'"+this.serializerId+"' serializer doesn't support .listen() method.")},e.prototype.removeListener=function(e){return this.serializer.api.removeListener(e)},e.prototype.removeAllListeners=function(){this.serializer&&this.serializer.teardown(),this.onJoin.removeAll(),this.onStateChange.removeAll(),this.onMessage.removeAll(),this.onError.removeAll(),this.onLeave.removeAll()},e.prototype.onMessageCallback=function(e){if(this.previousCode)this.previousCode===a.Protocol.ROOM_STATE?this.setState(Array.from(new Uint8Array(e.data))):this.previousCode===a.Protocol.ROOM_STATE_PATCH?this.patch(Array.from(new Uint8Array(e.data))):this.previousCode===a.Protocol.ROOM_DATA&&this.onMessage.dispatch(i.decode(e.data)),this.previousCode=void 0;else{var t=new DataView(e.data),n=t.getUint8(0);if(n===a.Protocol.JOIN_ROOM){var r=1;this.sessionId=a.utf8Read(t,r),r+=a.utf8Length(this.sessionId),this.serializerId=a.utf8Read(t,r),r+=a.utf8Length(this.serializerId);var o=s.getSerializer(this.serializerId);if(!o)throw new Error("missing serializer: "+this.serializerId);if("fossil-delta"!==this.serializerId&&(this.serializer=new o),t.buffer.byteLength>r&&this.serializer.handshake){var c=Array.from(new Uint8Array(t.buffer.slice(r)));this.serializer.handshake(c)}this.onJoin.dispatch()}else n===a.Protocol.JOIN_ERROR?this.onError.dispatch(a.utf8Read(t,1)):n===a.Protocol.LEAVE_ROOM?this.leave():this.previousCode=n}},e.prototype.setState=function(e){this.serializer.setState(e),this.onStateChange.dispatch(this.serializer.getState())},e.prototype.patch=function(e){this.serializer.patch(e),this.onStateChange.dispatch(this.serializer.getState())},e}();t.Room=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.registerSerializer=function(e,t){r[e]=t},t.getSerializer=function(e){return r[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(123),i=n(126),o=n(52),s=function(){function e(){this.api=new r.StateContainer({})}return e.prototype.getState=function(){return this.api.state},e.prototype.setState=function(e){this.previousState=new Uint8Array(e),this.api.set(o.decode(this.previousState))},e.prototype.patch=function(e){this.previousState=new Uint8Array(i.apply(this.previousState,e)),this.api.set(o.decode(this.previousState))},e.prototype.teardown=function(){this.api.removeAllListeners()},e}();t.FossilDeltaSerializer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53);t.Schema=r.Schema;var i=n(55);t.MapSchema=i.MapSchema;var o=n(54);t.ArraySchema=o.ArraySchema;var s=n(131);t.Reflection=s.Reflection,t.ReflectionType=s.ReflectionType,t.ReflectionField=s.ReflectionField;var a=n(90);t.type=a.type,t.filter=a.filter,t.Context=a.Context},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.END_OF_STRUCTURE=193,t.NIL=192,t.INDEX_CHANGE=212,t.TYPE_ID=213},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(54),o=n(55),s=function(){function e(e,t,n){void 0===e&&(e=null),void 0===n&&(n=!1),this.changed=!1,this.changes=[],this.allChanges=[],this.linkedTrees=[],this.parent=t,this.parentField=e,this.trackAllChanges=n}return e.prototype.link=function(e){this.linkedTrees.push(e)},e.prototype.change=function(e,t){void 0===t&&(t=!1),this.changed=!0,-1===this.changes.indexOf(e)&&this.changes.push(e);var n=this.allChanges.indexOf(e);t||-1!==n?t&&n>=0&&this.allChanges.splice(n,1):this.allChanges.push(e),this.parent&&this.parent.change(this.parentField)},e.prototype.mapIndex=function(e,t){this.indexMap||(this.indexMap=new Map,this.indexChange=new Map),this.indexMap.set(e,t)},e.prototype.getIndex=function(e){return this.indexMap&&this.indexMap.get(e)},e.prototype.deleteIndex=function(e){this.indexMap.delete(e)},e.prototype.mapIndexChange=function(e,t){this.indexChange.set(e,t)},e.prototype.getIndexChange=function(e){return this.indexChange&&this.indexChange.get(e)},e.prototype.deleteIndexChange=function(e){this.indexChange.delete(e)},e.prototype.changeAll=function(e){if(e instanceof r.Schema){var t=e._schema;for(var n in t)(e[n]instanceof r.Schema||e[n]instanceof i.ArraySchema||e[n]instanceof o.MapSchema)&&!e[n].$changes.parent.parent&&(e[n].$changes.parent=this),this.change(n)}else for(var s=0,a=Object.keys(e);s<a.length;s++){var c=a[s];this.change(c)}},e.prototype.discard=function(){this.changed=!1,this.changes=[],this.indexChange&&this.indexChange.clear()},e}();t.ChangeTree=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(89),i=n(53),o=function(){function e(){this.types={},this.schemas=new Map}return e.prototype.has=function(e){return this.schemas.has(e)},e.prototype.get=function(e){return this.types[e]},e.prototype.add=function(e){e._typeid=this.schemas.size,this.types[e._typeid]=e,this.schemas.set(e,e._typeid)},e}();t.Context=o,t.globalContext=new o,t.type=function(e,n){return void 0===n&&(n=t.globalContext),function(t,o){var s=t.constructor;s._context=n,n.has(s)||(n.add(s),s._schema=Object.assign({},s._schema||{}),s._indexes=Object.assign({},s._indexes||{}),s._descriptors=Object.assign({},s._descriptors||{})),s._indexes[o]=Object.keys(s._schema).length,s._schema[o]=e;var a=Array.isArray(e),c=!a&&e.map,u="_"+o;s._descriptors[u]={enumerable:!1,configurable:!1,writable:!0},s._descriptors[o]={get:function(){return this[u]},set:function(e){if((a||c)&&(e=new Proxy(e,{get:function(e,t){return e[t]},set:function(e,t,n){if("length"!==t&&"$changes"!==t){var o=a?Number(t):String(t),s=e.$changes.getIndex(n);void 0!==s&&e.$changes.mapIndexChange(n,s),e.$changes.mapIndex(n,o),n instanceof i.Schema?n.$changes.parent||(n.$changes=new r.ChangeTree(o,e.$changes),n.$changes.changeAll(n)):e[t]=n,e.$changes.change(o)}else e[t];return e[t]=n,!0},deleteProperty:function(e,t){e[t],delete e[t];var n=a?Number(t):String(t);return e.$changes.change(n,!0),!0}})),e!==this[u])if(this[u]=e,Array.isArray(s._schema[o])){this.$changes.change(o),e.$changes=new r.ChangeTree(o,this.$changes);for(var t=0;t<e.length;t++)e[t]instanceof i.Schema&&(e[t].$changes=new r.ChangeTree(t,e.$changes),e[t].$changes.changeAll(e[t])),e.$changes.mapIndex(e[t],t),e.$changes.change(t)}else if(s._schema[o].map)for(var n in e.$changes=new r.ChangeTree(o,this.$changes),this.$changes.change(o),e)e[n]instanceof i.Schema&&(e[n].$changes=new r.ChangeTree(n,e.$changes),e[n].$changes.changeAll(e[n])),e.$changes.mapIndex(e[n],n),e.$changes.change(n);else"function"==typeof s._schema[o]?(this.$changes.change(o),e&&(e.$changes=new r.ChangeTree(o,this.$changes),e.$changes.changeAll(e))):this.$changes.change(o)},enumerable:!0,configurable:!0}}},t.filter=function(e){return function(t,n){var r=t.constructor;r._filters||(r._filters={}),r._filters[n]=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(132);function i(e,t,n,r){return void 0===t&&(t="var"),function(i,o){i.constructor.properties||(i.constructor.properties={});var s=o;"string"==typeof e&&(s=o,o=e,e=void 0),i.constructor.properties[o]={addCallback:n,holderType:t,removeCallback:r,type:e,variable:s}}}t.initializeSync=function(e,t){s(e,t,t)},t.syncMap=function(e,t,n){return i(e,"map",t,n)},t.syncObject=function(e,t,n){return i(e,"object",t,n)},t.syncVar=function(e,t,n){return i(e,"var")},t.syncList=function(e,t,n){return i(e,"list",t,n)},t.key=function(){return i(void 0,"key")},t.room=function(){return function(e,t){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e.constructor.$room}})}},t.sync=i,t.listen=function(e,t){return function(n,r,i){n.constructor.listeners||(n.constructor.listeners={}),n.constructor.listeners[e]={methodName:r,op:t}}};var o={};function s(e,t,n,i){!function(e,t,n,i,a){if(!e)return;for(var c in Object.defineProperty(n,"$room",{configurable:!0,enumerable:!1,value:t,writable:!0}),n.$room=t,e)if(e.hasOwnProperty(c)){var u=e[c],l=a?a+"/"+c:c;if("map"===u.holderType&&(l+="/:id"),o[l])return;o[l]=!0;var h=r[u.holderType+"Listener"];h&&(t.listen(l,h(t,u,n,i,l)),u.type&&s(t,u.type,n,l))}}(t.constructor.properties||t.properties,e,t,n,i),a(t.constructor.listeners,e,t)}function a(e,t,n){if(e){var r=function(r){if(!e.hasOwnProperty(r))return"continue";var i=e[r],o=i.op?function(e){e.operation===i.op&&n[i.methodName](e)}:n[i.methodName].bind(n);t.listen(r,o)};for(var i in e)r(i)}}t.createBindings=s,t.bindListeners=a},function(e,t,n){"use strict";var r={props:{type:{type:String,default:"default"},title:String,disabled:Boolean}},i=(n(105),n(0)),o=Object(i.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:e.type,attrs:{title:e.disabled?"":e.title,disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[e._t("default")],2)},[],!1,null,"4b6a57b1",null).exports,s={props:{value:Boolean,label:String,disabled:Boolean},model:{prop:"value",event:"update"},computed:{model:{get(){return this.value},set(e){this.$emit("update",e)}}}};n(106),Object(i.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:{disabled:e.disabled,checked:e.value}},[n("span",{staticClass:"checkbox"},[n("span",{staticClass:"inner"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],attrs:{type:"checkbox",disabled:e.disabled},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:function(t){var n=e.model,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);r.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i}}})]),e._v(" "),e.$slots.default||e.label?n("span",{staticClass:"label"},[e._t("default"),e._v(" "),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},[],!1,null,"0e083b07",null).exports;function a(e,t,...n){const r=e[t];r instanceof Array?r.forEach(e=>e(...n)):r instanceof Function&&r(...n)}function c(e,t){t.forEach(t=>{e.dataset[t]=e.style[t]})}function u(e,t){t.forEach(t=>{e.style[t]=e.dataset[t]})}var l={functional:!0,props:{direction:{type:String,default:"vertical"},duration:{type:Number,default:.3},timingFunction:{type:String,default:"ease-in-out"}},render(e,{props:{direction:t,duration:n,timingFunction:r},listeners:i,children:o}){let s,l,h,f;"horizontal"===t?(s="width",f="scrollWidth",h="paddingLeft",l="paddingRight"):(s="height",f="scrollHeight",h="paddingTop",l="paddingBottom");const p=function(e,t,n){return e.filter(e=>!e.startsWith("transition")).map(e=>`${t}s ${n} ${function(e){return e.replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}(e)}`).join(",")}([s,l,h],n,r);return e("transition",{attrs:{css:!1},on:{beforeEnter(e){a(i,"before-enter",e),c(e,["transition",l,h]),e.style.transition=p,e.style[h]="0",e.style[l]="0",e.style[s]="0"},enter(e,t){e.dataset.overflow=e.style.overflow,u(e,[l,h]),e.style[s]=e[f]?e[f]+"px":"",e.style.overflow="hidden",setTimeout(t,1e3*n)},afterEnter(e){e.style[s]="",u(e,["overflow","transition"]),a(i,"after-enter",e)},beforeLeave(e){a(i,"before-leave",e),c(e,["overflow","transition",l,h]),e.style[s]=e[f]+"px",e.style.overflow="hidden"},leave(e,t){0!==e[f]&&(e.style.transition=p,e.style[s]="0",e.style[l]="0",e.style[h]="0"),setTimeout(t,1e3*n)},afterLeave(e){e.style[s]="",u(e,[l,h,"overflow","transition"]),a(i,"after-leave",e)}}},o)}},h=Object(i.a)(l,void 0,void 0,!1,null,null,null).exports;var f={props:{open:Boolean,initial:String},data:()=>({isOpen:!0}),components:{CollapseTransition:h},computed:{hasHeader(){return this.$slots.header||this.$slots["header-open"]&&this.isOpen||this.$slots["header-closed"]&&!this.isOpen}},created(){this.initial?(this.isOpen="open"===this.initial,this.onClickHeader=(()=>this.isOpen=!this.isOpen)):(this.isOpen=this.open,this.onClickHeader=(()=>this.$emit("toggle",event)),this.$watch("open",e=>{(function(e){return!0===e||!1===e})(e)&&e^this.isOpen&&(this.isOpen=e)}))}},p=(n(107),Object(i.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collapse-view"},[e.hasHeader?n("div",{staticClass:"collapse-header",on:{click:e.onClickHeader}},[e.isOpen?e._t("header-open",[e._t("header")]):e._t("header-closed",[e._t("header")])],2):e._e(),e._v(" "),n("collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"collapse-content"},[e._t("default")],2)])],1)},[],!1,null,"7c5c4507",null).exports),d=n(108),v=n.n(d),y={props:{prefixIcon:String,suffixIcon:String,placeholder:String,disabled:Boolean,inactive:Boolean,validate:Function,tabindex:Number,monospace:Boolean,value:[String,Number],type:{default:"text"},round:{default:!1},size:{default:1}},data:()=>({focused:!1,invalid:!1}),computed:{divStyle(){return{width:this.monospace&&this.inactive&&!this.focused?(v()(this.value||this.placeholder)/1.8+2.1)*this.size+"em":"100%"}},inputStyle(){return{fontSize:this.size+"rem",paddingLeft:Boolean(this.prefixIcon)+1+"em",paddingRight:Boolean(this.suffixIcon)+1+"em"}}},methods:{onInput(e){this.validate&&(this.invalid=!this.validate(e.target.value)),this.$emit("input",e.target.value)},onFocus(e){this.focused=!0,this.$emit("focus",e)},onBlur(e){this.focused=!1,this.$emit("blur",e)}}},g=(n(112),Object(i.a)(y,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input",class:{focused:e.focused,disabled:e.disabled},style:e.divStyle},[e.prefixIcon?n("i",{staticClass:"prefix",class:"icon-"+e.prefixIcon}):e._e(),e._v(" "),n("input",{class:{round:e.round,invalid:e.invalid,inactive:e.inactive,monospace:e.monospace},style:e.inputStyle,attrs:{type:e.type,tabindex:e.tabindex,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.onInput,focus:e.onFocus,blur:e.onBlur,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.$emit("enter",t))}}}),e._v(" "),e.suffixIcon?n("i",{staticClass:"suffix",class:"icon-"+e.suffixIcon}):e._e()])},[],!1,null,"0603412f",null).exports),_={props:{value:{},label:{},disabled:Boolean},model:{prop:"value",event:"input"},computed:{model:{get(){return this.value},set(e){this.$emit("input",e)}}}};n(113),Object(i.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:{disabled:e.disabled,checked:e.label===e.model}},[n("span",{staticClass:"radio"},[n("span",{staticClass:"inner"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],attrs:{type:"radio",disabled:e.disabled},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{change:function(t){e.model=e.label}}})]),e._v(" "),e.$slots.default||e.label?n("span",{staticClass:"label"},[e._t("default",[e._v(e._s(e.label))])],2):e._e()])},[],!1,null,"10444d54",null).exports;n.d(t,"a",function(){return o}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return g})},,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(68);n.n(r).a},function(e,t,n){"use strict";var r=n(69);n.n(r).a},function(e,t,n){"use strict";var r=n(70);n.n(r).a},function(e,t,n){"use strict";const r=n(109),i=n(111);e.exports=(e=>{if("string"!=typeof e||0===e.length)return 0;e=r(e);let t=0;for(let n=0;n<e.length;n++){const r=e.codePointAt(n);r<=31||r>=127&&r<=159||(r>=768&&r<=879||(r>65535&&n++,t+=i(r)?2:1))}return t})},function(e,t,n){"use strict";const r=n(110);e.exports=(e=>"string"==typeof e?e.replace(r(),""):e)},function(e,t,n){"use strict";e.exports=(()=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|");return new RegExp(e,"g")})},function(e,t,n){"use strict";e.exports=(e=>!Number.isNaN(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141)))},function(e,t,n){"use strict";var r=n(71);n.n(r).a},function(e,t,n){"use strict";var r=n(72);n.n(r).a},,function(e,t){ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return null!==e&&"object"==typeof e&&e.buffer instanceof ArrayBuffer})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),i=n(79),o=n(83),s=n(74),a=n(84),c=n(127),u=function(){function e(e,t){var n=this;void 0===t&&(t={}),this.onOpen=new i.Signal,this.onClose=new i.Signal,this.onError=new i.Signal,this.rooms={},this.connectingRooms={},this.requestId=0,this.roomsAvailableRequests={},this.hostname=e,c.getItem("colyseusid",function(e){return n.connect(e,t)})}return e.prototype.join=function(e,t){return void 0===t&&(t={}),this.createRoomRequest(e,t)},e.prototype.rejoin=function(e,t){if(!t.sessionId)throw new Error("'sessionId' options is required for 'rejoin'.");return this.join(e,t)},e.prototype.getAvailableRooms=function(e,t){var n=this,r=++this.requestId,i=function(){return delete n.roomsAvailableRequests[r]},o=setTimeout(function(){i(),t([],"timeout")},15e3);this.connection.send([s.Protocol.ROOM_LIST,r,e]),this.roomsAvailableRequests[r]=function(e){i(),clearTimeout(o),t(e)}},e.prototype.close=function(){this.connection.close()},e.prototype.createRoom=function(e,t){return void 0===t&&(t={}),new a.Room(e,t)},e.prototype.createRoomRequest=function(e,t,n,r){var i=this;t.requestId=++this.requestId;var o=n||this.createRoom(e,t);return o.onLeave.addOnce(function(){delete i.rooms[o.id],delete i.connectingRooms[t.requestId]}),t.retryTimes&&o.onError.addOnce(function(){r=r||0,!o.hasJoined&&r<=t.retryTimes&&(r++,i.createRoomRequest(e,t,o,r))}),this.connectingRooms[t.requestId]=o,this.connection.send([s.Protocol.JOIN_REQUEST,e,t]),o},e.prototype.connect=function(e,t){var n=this;void 0===t&&(t={}),this.id=e||"",this.connection=new o.Connection(this.buildEndpoint("",t)),this.connection.onmessage=this.onMessageCallback.bind(this),this.connection.onclose=function(e){return n.onClose.dispatch(e)},this.connection.onerror=function(e){return n.onError.dispatch(e)},this.connection.onopen=function(){n.id&&n.onOpen.dispatch()}},e.prototype.buildEndpoint=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=["colyseusid="+this.id];for(var r in t)t.hasOwnProperty(r)&&n.push(r+"="+t[r]);return this.hostname+"/"+e+"?"+n.join("&")},e.prototype.onMessageCallback=function(e){if(this.previousCode){if(this.previousCode===s.Protocol.ROOM_LIST){var t=r.decode(new Uint8Array(e.data)),n=(a=t[0],t[1]);this.roomsAvailableRequests[a]?this.roomsAvailableRequests[a](n):console.warn("receiving ROOM_LIST after timeout:",n)}this.previousCode=void 0}else{var i=new DataView(e.data),o=i.getUint8(0);if(o===s.Protocol.USER_ID)this.id=s.utf8Read(i,1),c.setItem("colyseusid",this.id),this.onOpen.dispatch();else if(o===s.Protocol.JOIN_REQUEST){var a=i.getUint8(1),u=this.connectingRooms[a],l="";if(!u)return void console.warn("colyseus.js: client left room before receiving session id.");u.id=s.utf8Read(i,2),this.rooms[u.id]=u;var h=3+u.id.length;i.byteLength>h&&(l=s.utf8Read(i,h)+"/"),u.connect(this.buildEndpoint(l+u.id,u.options)),delete this.connectingRooms[a]}else if(o===s.Protocol.JOIN_ERROR){var f=s.utf8Read(i,1);console.error("colyseus.js: server error:",f),this.onError.dispatch(f)}else o===s.Protocol.ROOM_LIST&&(this.previousCode=o)}},e}();t.Client=u},function(e,t,n){"use strict";function r(e){if(this._offset=0,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(e))throw new Error("Invalid argument");this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength)}}r.prototype._array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this._parse();return t},r.prototype._map=function(e){for(var t={},n=0;n<e;n++)t[this._parse()]=this._parse();return t},r.prototype._str=function(e){var t=function(e,t,n){for(var r="",i=0,o=t,s=t+n;o<s;o++){var a=e.getUint8(o);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(i=(7&a)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0);else r+=String.fromCharCode((31&a)<<6|63&e.getUint8(++o));else r+=String.fromCharCode(a)}return r}(this._view,this._offset,e);return this._offset+=e,t},r.prototype._bin=function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t},r.prototype._parse=function(){var e,t=this._view.getUint8(this._offset++),n=0,r=0,i=0,o=0;if(t<192)return t<128?t:t<144?this._map(15&t):t<160?this._array(15&t):this._str(31&t);if(t>223)return-1*(255-t+1);switch(t){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:return n=this._view.getUint8(this._offset),r=this._view.getInt8(this._offset+1),this._offset+=2,[r,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),r=this._view.getInt8(this._offset+2),this._offset+=3,[r,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),r=this._view.getInt8(this._offset+4),this._offset+=5,[r,this._bin(n)];case 202:return e=this._view.getFloat32(this._offset),this._offset+=4,e;case 203:return e=this._view.getFloat64(this._offset),this._offset+=8,e;case 204:return e=this._view.getUint8(this._offset),this._offset+=1,e;case 205:return e=this._view.getUint16(this._offset),this._offset+=2,e;case 206:return e=this._view.getUint32(this._offset),this._offset+=4,e;case 207:return i=this._view.getUint32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 208:return e=this._view.getInt8(this._offset),this._offset+=1,e;case 209:return e=this._view.getInt16(this._offset),this._offset+=2,e;case 210:return e=this._view.getInt32(this._offset),this._offset+=4,e;case 211:return i=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 212:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?void(this._offset+=1):[r,this._bin(1)];case 213:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(2)];case 214:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(4)];case 215:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?(i=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(i+o)):[r,this._bin(8)];case 216:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")},e.exports=function(e){var t=new r(e),n=t._parse();if(t._offset!==e.byteLength)throw new Error(e.byteLength-t._offset+" trailing bytes");return n}},function(e,t,n){"use strict";function r(e,t,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?e.setUint8(t++,r):r<2048?(e.setUint8(t++,192|r>>6),e.setUint8(t++,128|63&r)):r<55296||r>=57344?(e.setUint8(t++,224|r>>12),e.setUint8(t++,128|r>>6&63),e.setUint8(t++,128|63&r)):(i++,r=65536+((1023&r)<<10|1023&n.charCodeAt(i)),e.setUint8(t++,240|r>>18),e.setUint8(t++,128|r>>12&63),e.setUint8(t++,128|r>>6&63),e.setUint8(t++,128|63&r))}e.exports=function(e){var t=[],n=[],i=function e(t,n,r){var i=typeof r,o=0,s=0,a=0,c=0,u=0,l=0;if("string"===i){if((u=function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(r))<32)t.push(160|u),l=1;else if(u<256)t.push(217,u),l=2;else if(u<65536)t.push(218,u>>8,u),l=3;else{if(!(u<4294967296))throw new Error("String too long");t.push(219,u>>24,u>>16,u>>8,u),l=5}return n.push({_str:r,_length:u,_offset:t.length}),l+u}if("number"===i)return Math.floor(r)===r&&isFinite(r)?r>=0?r<128?(t.push(r),1):r<256?(t.push(204,r),2):r<65536?(t.push(205,r>>8,r),3):r<4294967296?(t.push(206,r>>24,r>>16,r>>8,r),5):(a=r/Math.pow(2,32)>>0,c=r>>>0,t.push(207,a>>24,a>>16,a>>8,a,c>>24,c>>16,c>>8,c),9):r>=-32?(t.push(r),1):r>=-128?(t.push(208,r),2):r>=-32768?(t.push(209,r>>8,r),3):r>=-2147483648?(t.push(210,r>>24,r>>16,r>>8,r),5):(a=Math.floor(r/Math.pow(2,32)),c=r>>>0,t.push(211,a>>24,a>>16,a>>8,a,c>>24,c>>16,c>>8,c),9):(t.push(203),n.push({_float:r,_length:8,_offset:t.length}),9);if("object"===i){if(null===r)return t.push(192),1;if(Array.isArray(r)){if((u=r.length)<16)t.push(144|u),l=1;else if(u<65536)t.push(220,u>>8,u),l=3;else{if(!(u<4294967296))throw new Error("Array too large");t.push(221,u>>24,u>>16,u>>8,u),l=5}for(o=0;o<u;o++)l+=e(t,n,r[o]);return l}if(r instanceof Date){var h=r.getTime();return a=Math.floor(h/Math.pow(2,32)),c=h>>>0,t.push(215,0,a>>24,a>>16,a>>8,a,c>>24,c>>16,c>>8,c),10}if(r instanceof ArrayBuffer){if((u=r.byteLength)<256)t.push(196,u),l=2;else if(u<65536)t.push(197,u>>8,u),l=3;else{if(!(u<4294967296))throw new Error("Buffer too large");t.push(198,u>>24,u>>16,u>>8,u),l=5}return n.push({_bin:r,_length:u,_offset:t.length}),l+u}if("function"==typeof r.toJSON)return e(t,n,r.toJSON());var f=[],p="",d=Object.keys(r);for(o=0,s=d.length;o<s;o++)"function"!=typeof r[p=d[o]]&&f.push(p);if((u=f.length)<16)t.push(128|u),l=1;else if(u<65536)t.push(222,u>>8,u),l=3;else{if(!(u<4294967296))throw new Error("Object too large");t.push(223,u>>24,u>>16,u>>8,u),l=5}for(o=0;o<u;o++)l+=e(t,n,p=f[o]),l+=e(t,n,r[p]);return l}if("boolean"===i)return t.push(r?195:194),1;if("undefined"===i)return t.push(212,0,0),3;throw new Error("Could not encode")}(t,n,e),o=new ArrayBuffer(i),s=new DataView(o),a=0,c=0,u=-1;n.length>0&&(u=n[0]._offset);for(var l,h=0,f=0,p=0,d=t.length;p<d;p++)if(s.setUint8(c+p,t[p]),p+1===u){if(h=(l=n[a])._length,f=c+u,l._bin)for(var v=new Uint8Array(l._bin),y=0;y<h;y++)s.setUint8(f+y,v[y]);else l._str?r(s,f,l._str):void 0!==l._float&&s.setFloat64(f,l._float);c+=h,n[++a]&&(u=n[a]._offset)}return o}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.add=function(e){return this.registerListener(e)},t}(n(80).OnceSignal);t.Signal=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(121).createBackoff,o="undefined"!=typeof WebSocket?WebSocket:n(122),s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.protocols=n,this.reconnectEnabled=!0,this.listeners={},this.backoff=i(r.backoff||"exponential",r),this.backoff.onReady=this.onBackoffReady.bind(this),(void 0===r.connect||r.connect)&&this.open()}return r(e,[{key:"open",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isReconnect=e;var t=this.ws&&this.ws.binaryType;this.ws=new o(this.url,this.protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this),t&&(this.ws.binaryType=t)}},{key:"onBackoffReady",value:function(e,t){this.open(!0)}},{key:"onCloseCallback",value:function(e){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&e.code<3e3&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(e,t){void 0===e&&(e=1e3),this.reconnectEnabled=!1,this.ws.close(e,t)}},{key:"send",value:function(e){this.ws.send(e)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(e){this.ws.binaryType=e}},{key:"extensions",get:function(){return this.ws.extensions},set:function(e){this.ws.extensions=e}},{key:"protocol",get:function(){return this.ws.protocol},set:function(e){this.ws.protocol=e}},{key:"onclose",set:function(e){this.listeners.onclose=e},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(e){this.listeners.onerror=e},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(e){this.listeners.onmessage=e},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(e){this.listeners.onopen=e},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(e){this.listeners.onreconnect=e},get:function(){return this.listeners.onreconnect}}]),e}();s.CONNECTING=o.CONNECTING,s.OPEN=o.OPEN,s.CLOSING=o.CLOSING,s.CLOSED=o.CLOSED,t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBackoff=function(e,t){return new i(r[e],t)};var r={exponential:function(e,t){return Math.floor(Math.random()*Math.pow(2,e)*t)},fibonacci:function(e,t){if(e>(r=1))for(var n=1,r=2,i=2;i<e;i++){var o=n+r;n=r,r=o}return Math.floor(Math.random()*r*t)}};function i(e,t){this.func=e,this.attempts=0,this.delay=void 0!==t.initialDelay?t.initialDelay:100}i.prototype.backoff=function(){setTimeout(this.onReady,this.func(++this.attempts,this.delay))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124);t.StateContainer=r.StateContainer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(125),i=function(){function e(e){this.listeners=[],this.matcherPlaceholders={":id":/^([a-zA-Z0-9\-_]+)$/,":number":/^([0-9]+)$/,":string":/^(\w+)$/,":axis":/^([xyz])$/,":*":/(.*)/},this.state=e,this.reset()}return e.prototype.set=function(e){var t=r.compare(this.state,e);return this.state=e,this.checkPatches(t,this.listeners,this.defaultListener),t},e.prototype.registerPlaceholder=function(e,t){this.matcherPlaceholders[e]=t},e.prototype.listen=function(e,t,n){var i,o=this;"function"==typeof e?(i=[],t=e):i=e.split("/"),t.length>1&&console.warn(".listen() accepts only one parameter.");var s={callback:t,rawRules:i,rules:i.map(function(e){return"string"==typeof e?0===e.indexOf(":")?o.matcherPlaceholders[e]||o.matcherPlaceholders[":*"]:new RegExp("^"+e+"$"):e})};return 0===i.length?this.defaultListener=s:this.listeners.push(s),n&&this.checkPatches(r.compare({},this.state),[s]),s},e.prototype.removeListener=function(e){for(var t=this.listeners.length-1;t>=0;t--)this.listeners[t]===e&&this.listeners.splice(t,1)},e.prototype.removeAllListeners=function(){this.reset()},e.prototype.checkPatches=function(e,t,n){for(var r=0,i=t.length;r<i;r++)for(var o=t[r],s=e.length-1;s>=0;s--){var a=o&&this.getPathVariables(e[s],o);a&&(o.callback({path:a,rawPath:e[s].path,operation:e[s].operation,value:e[s].value}),e[s].matched=!0)}if(n)for(s=e.length-1;s>=0;s--)e[s].matched||n.callback(e[s])},e.prototype.getPathVariables=function(e,t){if(e.path.length!==t.rules.length)return!1;for(var n={},r=0,i=t.rules.length;r<i;r++){var o=e.path[r].match(t.rules[r]);if(!o||0===o.length||o.length>2)return!1;":"===t.rawRules[r].substr(0,1)&&(n[t.rawRules[r].substr(1)]=o[1])}return n},e.prototype.reset=function(){this.listeners=[]},e}();t.StateContainer=i},function(e,t,n){"use strict";function r(e,t){var n=e.slice();return n.push(t),n}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(i);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.compare=function(e,t){var n=[];return function e(t,n,o,s){for(var a=i(n),c=i(t),u=!1,l=c.length-1;l>=0;l--){var h=c[l],f=t[h];if(!n.hasOwnProperty(h)||void 0===n[h]&&void 0!==f&&!1===Array.isArray(n))o.push({operation:"remove",path:r(s,h)}),u=!0;else{var p=n[h];"object"==typeof f&&null!=f&&"object"==typeof p&&null!=p?e(f,p,o,r(s,h)):f!==p&&o.push({operation:"replace",path:r(s,h),value:p,previousValue:f})}}if(u||a.length!=c.length)for(var l=a.length-1;l>=0;l--){var h=a[l];if(!t.hasOwnProperty(h)&&void 0!==n[h]){var p=n[h],d=r(s,h);"object"==typeof p&&null!=p&&e({},p,o,d),o.push({operation:"add",path:d,value:p})}}}(e,t,n,[]),n}},function(e,t,n){var r,i;r=this,i=function(){"use strict";var e={},t=16;function n(){this.a=0,this.b=0,this.i=0,this.z=new Array(t)}n.prototype.init=function(e,n){var r,i,o=0,s=0;for(r=0;r<t;r++)o=o+(i=e[n+r])&65535,s=s+(t-r)*i&65535,this.z[r]=i;this.a=65535&o,this.b=65535&s,this.i=0},n.prototype.next=function(e){var n=this.z[this.i];this.z[this.i]=e,this.i=this.i+1&t-1,this.a=this.a-n+e&65535,this.b=this.b-t*n+this.a&65535},n.prototype.value=function(){return(65535&this.a|(65535&this.b)<<16)>>>0};var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~".split("").map(function(e){return e.charCodeAt(0)}),i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,36,-1,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,-1,-1,-1,63,-1];function o(e){this.a=e,this.pos=0}function s(){this.a=[]}function a(e){var t,n;for(t=1,n=64;e>=n;t++,n<<=6);return t}function c(e){for(var t=0,n=0,r=0,i=0,o=0,s=e.length;s>=16;)t=t+e[o+0]|0,n=n+e[o+1]|0,r=r+e[o+2]|0,i=i+e[o+3]|0,t=t+e[o+4]|0,n=n+e[o+5]|0,r=r+e[o+6]|0,i=i+e[o+7]|0,t=t+e[o+8]|0,n=n+e[o+9]|0,r=r+e[o+10]|0,i=i+e[o+11]|0,t=t+e[o+12]|0,n=n+e[o+13]|0,r=r+e[o+14]|0,i=i+e[o+15]|0,o+=16,s-=16;for(;s>=4;)t=t+e[o+0]|0,n=n+e[o+1]|0,r=r+e[o+2]|0,i=i+e[o+3]|0,o+=4,s-=4;switch(i=((i+(r<<8)|0)+(n<<16)|0)+(t<<24)|0,s){case 3:i=i+(e[o+2]<<8)|0;case 2:i=i+(e[o+1]<<16)|0;case 1:i=i+(e[o+0]<<24)|0}return i>>>0}return o.prototype.haveBytes=function(){return this.pos<this.a.length},o.prototype.getByte=function(){var e=this.a[this.pos];if(this.pos++,this.pos>this.a.length)throw new RangeError("out of bounds");return e},o.prototype.getChar=function(){return String.fromCharCode(this.getByte())},o.prototype.getInt=function(){for(var e,t=0;this.haveBytes()&&(e=i[127&this.getByte()])>=0;)t=(t<<6)+e;return this.pos--,t>>>0},s.prototype.toArray=function(){return this.a},s.prototype.putByte=function(e){this.a.push(255&e)},s.prototype.putChar=function(e){this.putByte(e.charCodeAt(0))},s.prototype.putInt=function(e){var t,n,i=[];if(0!==e){for(t=0;e>0;t++,e>>>=6)i.push(r[63&e]);for(n=t-1;n>=0;n--)this.putByte(i[n])}else this.putChar("0")},s.prototype.putArray=function(e,t,n){for(var r=t;r<n;r++)this.a.push(e[r])},e.create=function(e,r){var i,o=new s,u=r.length,l=e.length,h=-1;if(o.putInt(u),o.putChar("\n"),l<=t)return o.putInt(u),o.putChar(":"),o.putArray(r,0,u),o.putInt(c(r)),o.putChar(";"),o.toArray();var f=Math.ceil(l/t),p=new Array(f),d=new Array(f);for(i=0;i<p.length;i++)p[i]=-1;for(i=0;i<d.length;i++)d[i]=-1;var v,y=new n;for(i=0;i<l-t;i+=t)y.init(e,i),v=y.value()%f,p[i/t]=d[v],d[v]=i/t;for(var g,_,m,b,w,C=0;C+t<u;)for(b=0,w=0,y.init(r,C),i=0,m=0;;){var O=250;for(_=d[v=y.value()%f];_>=0&&O-- >0;){var S,A,E,I,P,R,k;for(I=0,R=g=_*t,k=C+i;R<l&&k<u&&e[R]===r[k];I++,R++,k++);for(I--,P=1;P<g&&P<=i&&e[g-P]===r[C+i-P];P++);A=g- --P,E=i-P,(S=I+P+1)>=a(i-P)+a(S)+a(A)+3&&S>m&&(m=S,b=g-P,w=E),_=p[_]}if(m>0){w>0&&(o.putInt(w),o.putChar(":"),o.putArray(r,C,C+w),C+=w),C+=m,o.putInt(m),o.putChar("@"),o.putInt(b),o.putChar(","),b+m-1>h&&(h=b+m-1),m=0;break}if(C+i+t>=u){o.putInt(u-C),o.putChar(":"),o.putArray(r,C,C+u-C),C=u;break}y.next(r[C+i+t]),i++}return C<u&&(o.putInt(u-C),o.putChar(":"),o.putArray(r,C,C+u-C)),o.putInt(c(r)),o.putChar(";"),o.toArray()},e.outputSize=function(e){var t=new o(e),n=t.getInt();if("\n"!==t.getChar())throw new Error("size integer not terminated by '\\n'");return n},e.apply=function(e,t,n){var r,i=0,a=new o(t),u=e.length,l=t.length;if(r=a.getInt(),"\n"!==a.getChar())throw new Error("size integer not terminated by '\\n'");for(var h=new s;a.haveBytes();){var f,p;switch(f=a.getInt(),a.getChar()){case"@":if(p=a.getInt(),a.haveBytes()&&","!==a.getChar())throw new Error("copy command not terminated by ','");if((i+=f)>r)throw new Error("copy exceeds output file size");if(p+f>u)throw new Error("copy extends past end of input");h.putArray(e,p,p+f);break;case":":if((i+=f)>r)throw new Error("insert command gives an output larger than predicted");if(f>l)throw new Error("insert count exceeds size of delta");h.putArray(a.a,a.pos,a.pos+f),a.pos+=f;break;case";":var d=h.toArray();if((!n||!1!==n.verifyChecksum)&&f!==c(d))throw new Error("bad checksum");if(i!==r)throw new Error("generated size does not match predicted size");return d;default:throw new Error("unknown delta operator")}}throw new Error("unterminated delta")},e},e.exports?e.exports=i():r.fossilDelta=i()},function(e,t,n){"use strict";var r;function i(){return r||(r="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(e,t){this.cache[e]=t},getItem:function(e){this.cache[e]}}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.setItem=function(e,t){i().setItem(e,t)},t.getItem=function(e,t){var n=i().getItem(e);"undefined"!=typeof Promise&&n instanceof Promise?n.then(function(e){return t(e)}):t(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i=function(){function e(){}return e.prototype.setState=function(e){this.state.decode(e)},e.prototype.getState=function(){return this.state},e.prototype.patch=function(e){this.state.decode(e)},e.prototype.teardown=function(){},e.prototype.handshake=function(e){this.state=r.Reflection.decode(e)},e}();t.SchemaSerializer=i},function(e,t,n){"use strict";function r(e,t,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?e[t++]=r:r<2048?(e[t++]=192|r>>6,e[t++]=128|63&r):r<55296||r>=57344?(e[t++]=224|r>>12,e[t++]=128|r>>6&63,e[t++]=128|63&r):(i++,r=65536+((1023&r)<<10|1023&n.charCodeAt(i)),e[t++]=240|r>>18,e[t++]=128|r>>12&63,e[t++]=128|r>>6&63,e[t++]=128|63&r)}function i(e,t){e.push(t)}function o(e,t){e.push(t)}function s(e,t){e.push(t),e.push(t>>8)}function a(e,t){e.push(t),e.push(t>>8)}function c(e,t){e.push(t),e.push(t>>8),e.push(t>>16),e.push(t>>24)}function u(e,t){var n=t>>24,r=t>>16,i=t>>8,o=t;e.push(o),e.push(i),e.push(r),e.push(n)}function l(e,t){var n=Math.floor(t/Math.pow(2,32));u(e,t>>>0),u(e,n)}function h(e,t){var n=t/Math.pow(2,32)>>0;u(e,t>>>0),u(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.utf8Write=r,t.int8=i,t.uint8=o,t.int16=s,t.uint16=a,t.int32=c,t.uint32=u,t.int64=l,t.uint64=h,t.float32=function(e,t){y(e,t)},t.float64=function(e,t){g(e,t)};var f=!0,p=new Int32Array(2),d=new Float32Array(p.buffer),v=new Float64Array(p.buffer);function y(e,t){d[0]=t,c(e,p[0])}function g(e,t){v[0]=t,c(e,p[f?0:1]),c(e,p[f?1:0])}t.writeFloat32=y,t.writeFloat64=g,t.boolean=function(e,t){return o(e,t?1:0)},t.string=function(e,t){t||(t="");var n=function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t),i=0;if(n<32)e.push(160|n),i=1;else if(n<256)e.push(217),o(e,n),i=2;else if(n<65536)e.push(218),a(e,n),i=3;else{if(!(n<4294967296))throw new Error("String too long");e.push(219),u(e,n),i=5}return r(e,e.length,t),i+n},t.number=function e(t,n){return isNaN(n)?(console.error("trying to encode a NaN value. will be encoded as `0`."),e(t,0)):isFinite(n)?Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(o(t,n),1):n<256?(t.push(204),o(t,n),2):n<65536?(t.push(205),a(t,n),3):n<4294967296?(t.push(206),u(t,n),5):(t.push(207),h(t,n),9):n>=-32?(t.push(n),1):n>=-128?(t.push(208),i(t,n),2):n>=-32768?(t.push(209),s(t,n),3):n>=-2147483648?(t.push(210),c(t,n),5):(t.push(211),l(t,n),9):(t.push(203),g(t,n),9):e(t,n>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88);function i(e,t){return o(e,t)<<24>>24}function o(e,t){return e[t.offset++]}function s(e,t){return a(e,t)<<16>>16}function a(e,t){return e[t.offset++]|e[t.offset++]<<8}function c(e,t){return e[t.offset++]|e[t.offset++]<<8|e[t.offset++]<<16|e[t.offset++]<<24}function u(e,t){return c(e,t)>>>0}function l(e,t){var n=u(e,t);return c(e,t)*Math.pow(2,32)+n}function h(e,t){var n=u(e,t);return u(e,t)*Math.pow(2,32)+n}t.int8=i,t.uint8=o,t.int16=s,t.uint16=a,t.int32=c,t.uint32=u,t.float32=function(e,t){return y(e,t)},t.float64=function(e,t){return g(e,t)},t.int64=l,t.uint64=h;var f=!0,p=new Int32Array(2),d=new Float32Array(p.buffer),v=new Float64Array(p.buffer);function y(e,t){return p[0]=c(e,t),d[0]}function g(e,t){return p[f?0:1]=c(e,t),p[f?1:0]=c(e,t),v[0]}t.readFloat32=y,t.readFloat64=g,t.boolean=function(e,t){return o(e,t)>0},t.string=function(e,t){var n,r=e[t.offset++];r<192?n=31&r:217===r?n=o(e,t):218===r?n=a(e,t):219===r&&(n=u(e,t));var i=function(e,t,n){for(var r="",i=0,o=t,s=t+n;o<s;o++){var a=e[o];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(i=(7&a)<<18|(63&e[++o])<<12|(63&e[++o])<<6|(63&e[++o])<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&a)<<12|(63&e[++o])<<6|(63&e[++o])<<0);else r+=String.fromCharCode((31&a)<<6|63&e[++o]);else r+=String.fromCharCode(a)}return r}(e,t.offset,n);return t.offset+=n,i},t.stringCheck=function(e,t){var n=e[t.offset];return n<192&&n>160||217===n||218===n||219===n},t.number=function(e,t){var n=e[t.offset++];return n<128?n:202===n?y(e,t):203===n?g(e,t):204===n?o(e,t):205===n?a(e,t):206===n?u(e,t):207===n?h(e,t):208===n?i(e,t):209===n?s(e,t):210===n?c(e,t):211===n?l(e,t):n>223?-1*(255-n+1):void 0},t.numberCheck=function(e,t){var n=e[t.offset];return n<128||n>=202&&n<=211},t.arrayCheck=function(e,t){return e[t.offset]<160},t.nilCheck=function(e,t){return e[t.offset]===r.NIL},t.indexChangeCheck=function(e,t){return e[t.offset]===r.INDEX_CHANGE}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(90),a=n(53),c=n(54),u=n(55),l=new s.Context,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),o([s.type("string",l)],t.prototype,"name",void 0),o([s.type("string",l)],t.prototype,"type",void 0),o([s.type("uint8",l)],t.prototype,"referencedType",void 0),t}(a.Schema);t.ReflectionField=h;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fields=new c.ArraySchema,t}return i(t,e),o([s.type("uint8",l)],t.prototype,"id",void 0),o([s.type([h],l)],t.prototype,"fields",void 0),t}(a.Schema);t.ReflectionType=f;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.types=new c.ArraySchema,t}return i(t,e),t.encode=function(e){var n=e.constructor,r=new t;r.rootType=n._typeid;var i=function(e,t){for(var n in t){var i=new h;i.name=n;var o=void 0;if("string"==typeof t[n])o=t[n];else{var s="function"==typeof t[n],a=Array.isArray(t[n]),c=!a&&t[n].map,u=void 0;s?(o="ref",u=t[n]):a?(o="array","string"==typeof t[n][0]?o+=":"+t[n][0]:u=t[n][0]):c&&(o="map","string"==typeof t[n].map?o+=":"+t[n].map:u=t[n].map),i.referencedType=u?u._typeid:255}i.type=o,e.fields.push(i)}r.types.push(e)},o=n._context.types;for(var s in o){var a=new f;a.id=Number(s),i(a,o[s]._schema)}return r.encodeAll()},t.decode=function(e){var n=new s.Context,r=new t;r.decode(e);var o=r.types.reduce(function(e,t){return e[t.id]=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(a.Schema),e},{});r.types.forEach(function(e,t){e.fields.forEach(function(t){var r=o[e.id];if(void 0!==t.referencedType){var i=o[t.referencedType];i||(i=t.type.split(":")[1]),0===t.type.indexOf("array")?s.type([i],n)(r.prototype,t.name):0===t.type.indexOf("map")?s.type({map:i},n)(r.prototype,t.name):"ref"===t.type&&s.type(i,n)(r.prototype,t.name)}else s.type(t.type,n)(r.prototype,t.name)})});var l=o[r.rootType],h=new l;for(var f in l._schema){var p=l._schema[f];if("string"!=typeof p){var d="function"==typeof p,v=Array.isArray(p),y=!v&&p.map;h[f]=v?new c.ArraySchema:y?new u.MapSchema:d?new p:void 0}}return h},o([s.type([f],l)],t.prototype,"types",void 0),o([s.type("uint8",l)],t.prototype,"rootType",void 0),t}(a.Schema);t.Reflection=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91);function i(e,t,n,r,i){"var"===t.holderType?e[n]=r:"key"===t.holderType&&(e[n]=i)}function o(e,t,n){void 0===n&&(n=0);for(var r=e,i=0,o=t.length;i<o+n&&"object"==typeof r[t[i]];i++)r=r[t[i]];return r}t.objectListener=function(e,t,n,i,o){return function(o){if("add"===o.operation){var s=new t.type;for(var a in o.value)o.value.hasOwnProperty(a)&&(s[a]=o.value[a]);r.bindListeners(t.type.listeners,e,s),n[t.variable]=s,t.addCallback&&t.addCallback.call(i,i,s,o)}else"replace"===o.operation?i[this.rawRules[0]][t.variable]=o.value:"remove"===o.operation&&(t.removeCallback&&t.removeCallback.call(i,i,n[t.variable][o.path.id],o),delete n[t.variable])}},t.mapListener=function(e,t,n,s,a){return function(a){var c=o(s,a.rawPath);if("add"===a.operation){var u=new t.type;Object.defineProperty(u,"__mapParent",{configurable:!0,enumerable:!1,value:o(s,a.rawPath,-2),writable:!0}),r.bindListeners(t.type.listeners,e,u),c[a.path.id]=u,function(e,t,n,r){for(var o in t)t.hasOwnProperty(o)&&i(e,t[o],o,n[o],r)}(u,t.type.properties,a.value,a.path.id),t.addCallback&&t.addCallback.call(u.__mapParent,u.__mapParent,u,a)}else"replace"===a.operation?i(c,t,t.variable,a.value):"remove"===a.operation&&(t.removeCallback&&t.removeCallback.call(c.__mapParent,c.__mapParent,c,a),delete n[t.variable][a.path.id])}},t.varListener=function(e,t,n,r,s){return function(e){var n=o(r,e.rawPath);"remove"!==e.operation?i(n,t,t.variable,e.value):"remove"===e.operation&&delete n[t.variable]}}}])]);